# Система лицензирования

> **⚠️ СТАТУС: ОТЛОЖЕННЫЙ ФУНКЦИОНАЛ**
> **Дата отложения:** Январь 2025
> **Причина:** Требуется полная переработка системы лицензирования
> **Планируется:** Реализация в отдельной доработке

---

## Обзор

Система лицензирования IP-CSS планируется к реализации в отдельной доработке. Текущая реализация (~20%) вынесена за рамки основного проекта.

## Планируемая архитектура

Система лицензирования IP-CSS будет использовать двухкомпонентную модель:
1. **XML лицензия** - подписанная цифровой подписью
2. **Активационный код** - привязка к устройству/устройствам

## Планируемые типы лицензий

### Trial (Триальная)
- Максимум 1 камера
- Запись до 10 минут непрерывно
- Водяной знак на видео
- Без аналитики и ANPR
- Срок действия 30 дней

### Business (Бизнес)
- До 8 камер
- Непрерывная запись
- Базовая аналитика
- Срок действия 1 год

### Enterprise (Корпоративная)
- До 16+ камер
- Полная аналитика и ANPR
- Облачное хранилище
- Множественные пользователи
- API доступ
- Поддержка 24/7

## Текущее состояние реализации

**Статус:** ~20% (базовая структура)

**Реализовано:**
- ✅ Базовая структура LicenseManager
- ✅ Модели данных (License, ActivatedLicense, etc.)
- ✅ Валидация лицензии при запуске (базовая)
- ✅ Проверка доступности функций
- ⚠️ Платформо-специфичные реализации (частично - используют временные решения)

**Не реализовано:**
- ❌ Онлайн активация (HTTP запрос к серверу, парсинг XML, проверка подписи)
- ❌ Офлайн активация (расшифровка кода, валидация)
- ❌ Проверка целостности (проверка подписи и хеша)
- ❌ Полная реализация платформо-специфичных хранилищ (Android Keystore, iOS Keychain)

## Расположение кода

Код системы лицензирования находится в:
- `core/license/` - основной модуль лицензирования
- `shared/src/commonMain/kotlin/.../domain/model/License.kt` - доменная модель
- `core/network/src/commonMain/kotlin/.../api/LicenseApiService.kt` - API сервис

**Примечание:** Код сохранен для будущей доработки, но функционал отключен в текущей версии продукта.

## Планы на будущее

При возобновлении разработки системы лицензирования необходимо:
1. Переработать архитектуру системы
2. Реализовать полноценную онлайн и офлайн активацию
3. Добавить криптографическую защиту
4. Реализовать платформо-специфичные хранилища
5. Интегрировать с серверной частью

---

**Последнее обновление:** Январь 2025
