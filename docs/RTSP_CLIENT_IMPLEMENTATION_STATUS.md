# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ RTSP –∫–ª–∏–µ–Ω—Ç–∞

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –î–µ–∫–∞–±—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å:** üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

1. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–µ–Ω cinterop .def —Ñ–∞–π–ª**
   - –ò–∑–º–µ–Ω–µ–Ω language —Å C++ –Ω–∞ C (cinterop —Ä–∞–±–æ—Ç–∞–µ—Ç —Å C)
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—É—Ç–∏ –∫ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–º —Ñ–∞–π–ª–∞–º
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã linker –æ–ø—Ü–∏–∏

2. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω build.gradle.kts**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ macOS –ø–ª–∞—Ç—Ñ–æ—Ä–º (macosX64, macosArm64)
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã cinterops –¥–ª—è –≤—Å–µ—Ö native –ø–ª–∞—Ç—Ñ–æ—Ä–º (Linux –∏ macOS)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã sourceSets –¥–ª—è –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã includeDirs –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã cinterop

3. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω CMakeLists.txt**
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∫ SHARED (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ visibility –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è macOS (MACOSX_RPATH)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Linux (--export-dynamic)

4. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è pause() –≤ RtspClient.kt**
   - –ó–∞–º–µ–Ω–µ–Ω TODO –Ω–∞ –≤—ã–∑–æ–≤ –Ω–∞—Ç–∏–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º

5. ‚úÖ **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**
   - `scripts/build-native-lib.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è Linux –∏ macOS
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫

6. ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - `docs/RTSP_BUILD_INSTRUCTIONS.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ
   - `native/video-processing/README.md` - README –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω `RTSP_CLIENT_IMPLEMENTATION_STATUS.md`

---

## üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### Native –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Linux/macOS)

1. üü° **NativeRtspClient.native.kt**
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ TODO
   - –í—Å–µ –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç –∑–∞–≥–ª—É—à–∫–∏
   - –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ cinterop –Ω—É–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
- –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è Linux –∏ macOS
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É Kotlin/Native –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ cinterop –±–∏–Ω–¥–∏–Ω–≥–æ–≤
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ NativeRtspClient.native.kt

---

## ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Android –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

1. ‚ùå **NativeRtspClient.android.kt**
   - –í—Å–µ –º–µ—Ç–æ–¥—ã —Å–æ–¥–µ—Ä–∂–∞—Ç TODO
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JNI
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Android (armeabi-v7a, arm64-v8a, x86, x86_64)

### iOS –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

1. ‚ùå **NativeRtspClient.ios.kt**
   - –í—Å–µ –º–µ—Ç–æ–¥—ã —Å–æ–¥–µ—Ä–∂–∞—Ç TODO
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cinterop
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è iOS (arm64, x86_64 –¥–ª—è —Å–∏–º—É–ª—è—Ç–æ—Ä–∞)

### JVM/Desktop –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

1. ‚ùå **NativeRtspClient.jvm.kt**
   - –í—Å–µ –º–µ—Ç–æ–¥—ã —Å–æ–¥–µ—Ä–∂–∞—Ç TODO
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JNI –∏–ª–∏ Java –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è RTSP

### Callbacks

1. ‚ùå **–û–±—Ä–∞–±–æ—Ç–∫–∞ callbacks**
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è thread-safe callbacks —á–µ—Ä–µ–∑ StableRef
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –∏ Kotlin —Ç–∏–ø–∞–º–∏
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º callbacks

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–ª–µ–¥—É—é—â–∏–µ 1-2 –¥–Ω—è):

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```bash
   # Ubuntu/Debian
   sudo apt-get install cmake build-essential pkg-config \
       libavformat-dev libavcodec-dev libavutil-dev \
       libswscale-dev libswresample-dev
   
   # macOS
   brew install cmake ffmpeg pkg-config
   ```

2. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
   ```bash
   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   ./scripts/build-native-lib.sh
   
   # –ò–ª–∏ —Ä—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞
   cd native/video-processing
   mkdir build && cd build
   cmake .. -DCMAKE_BUILD_TYPE=Release
   cmake --build . --config Release
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤:**
   ```bash
   # Linux
   nm -D native/video-processing/build/libvideo_processing.so | grep rtsp_client
   
   # macOS
   nm -gU native/video-processing/build/libvideo_processing.dylib | grep rtsp_client
   ```

4. **–°–±–æ—Ä–∫–∞ Kotlin/Native –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ cinterop –±–∏–Ω–¥–∏–Ω–≥–æ–≤:**
   ```bash
   ./gradlew :core:network:compileKotlinNative
   # –∏–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
   ./gradlew :core:network:compileKotlinLinuxX64
   ./gradlew :core:network:compileKotlinMacosX64
   ./gradlew :core:network:compileKotlinMacosArm64
   ```

5. **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ NativeRtspClient.native.kt:**
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ cinterop –±–∏–Ω–¥–∏–Ω–≥–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–∏–Ω–¥–∏–Ω–≥–∞—Ö
   - –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —Ç–∏–ø–æ–≤ –∏ callbacks

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è (1 –Ω–µ–¥–µ–ª—è):

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Linux:**
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å connect/play/stop —Å —Ä–µ–∞–ª—å–Ω–æ–π RTSP –∫–∞–º–µ—Ä–æ–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É callbacks

6. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Android –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å JNI
   - –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è Android
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NativeRtspClient.android.kt

---

## üîç –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **cinterop —Ç—Ä–µ–±—É–µ—Ç C, –∞ –Ω–µ C++**
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∏–∑–º–µ–Ω–µ–Ω .def —Ñ–∞–π–ª –Ω–∞ language = C
   - C++ —Ñ—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ extern "C"

2. **–≠–∫—Å–ø–æ—Ä—Ç —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ shared library**
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ visibility –≤ CMakeLists.txt

3. **Callbacks –∏–∑ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤**
   - ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è: –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å StableRef –¥–ª—è thread-safety

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[RTSP_CLIENT.md](RTSP_CLIENT.md)** - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ RTSP –∫–ª–∏–µ–Ω—Ç–∞
- **[RTSP_CLIENT_INTEGRATION.md](RTSP_CLIENT_INTEGRATION.md)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **[RTSP_BUILD_INSTRUCTIONS.md](RTSP_BUILD_INSTRUCTIONS.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **[RTSP_CLIENT_ACTIVATION_GUIDE.md](RTSP_CLIENT_ACTIVATION_GUIDE.md)** - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–æ–¥–∞
- **[RTSP_CLIENT_SETUP_SUMMARY.md](RTSP_CLIENT_SETUP_SUMMARY.md)** - –°–≤–æ–¥–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **[MISSING_FUNCTIONALITY.md](MISSING_FUNCTIONALITY.md#rtspclient)** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ö–æ–¥ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (FFmpeg, CMake) –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [RTSP_CLIENT_ACTIVATION_GUIDE.md](RTSP_CLIENT_ACTIVATION_GUIDE.md).

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2025

