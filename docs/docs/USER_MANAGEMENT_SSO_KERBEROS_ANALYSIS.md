# –£–≥–ª—É–±–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SSO/Kerberos

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** –î–µ–∫–∞–±—Ä—å 2025
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** Alfa-0.0.1
**–°—Ç–∞—Ç—É—Å:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ

–ü—Ä–æ–µ–∫—Ç IP-CSS **–Ω–µ –∏–º–µ–µ—Ç** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å –¥–æ–º–µ–Ω–æ–º Active Directory –∏ SSO/Kerberos. –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—É—é –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—è–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω—ã, –Ω–æ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**:

1. ‚ùå –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
2. ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Active Directory / LDAP
3. ‚ùå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSO (Single Sign-On)
4. ‚ùå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Kerberos –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
5. ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–æ–º–µ–Ω–æ–º
6. ‚ùå –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø –¥–æ–º–µ–Ω–∞

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø** - –ü—Ä–æ–µ–∫—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

---

## 1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### 1.1. –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### ‚úÖ –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Domain Layer)

**–§–∞–π–ª:** `shared/src/commonMain/kotlin/com/company/ipcamera/shared/domain/model/User.kt`

```kotlin
data class User(
    val id: String,
    val username: String,
    val email: String? = null,
    val fullName: String? = null,
    val role: UserRole,
    val permissions: List<String> = emptyList(),
    val createdAt: Long,
    val lastLoginAt: Long? = null,
    val isActive: Boolean = true
)

enum class UserRole {
    ADMIN,
    OPERATOR,
    VIEWER,
    GUEST
}
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (4 —Ä–æ–ª–∏: ADMIN, OPERATOR, VIEWER, GUEST)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (—Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö permissions)
- ‚úÖ –ú–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ (`isAdmin()`, `hasPermission()`)
- ‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –ù–µ—Ç —Å–≤—è–∑–∏ —Å –¥–æ–º–µ–Ω–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ –∏–ª–∏ SID

#### ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Domain Layer)

**–§–∞–π–ª:** `shared/src/commonMain/kotlin/com/company/ipcamera/shared/domain/repository/UserRepository.kt`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `login(username, password)` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `logout()` - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `register(username, email, password, fullName)` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `getCurrentUser()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `updateCurrentUser(user)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `getUsers(page, limit, role)` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `getUserById(id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- `updateUser(user)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `deleteUser(id)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `refreshToken(refreshToken)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API (`UserRepositoryImpl`)
- ‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î, –Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –¥–æ–º–µ–Ω–æ–º

#### ‚úÖ API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§–∞–π–ª:** `core/network/src/commonMain/kotlin/com/company/ipcamera/core/network/api/UserApiService.kt`

**Endpoints:**
- `POST /api/v1/auth/login` - –≤—Ö–æ–¥
- `POST /api/v1/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/v1/auth/logout` - –≤—ã—Ö–æ–¥
- `POST /api/v1/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/users/me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `PUT /api/v1/users/me` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `GET /api/v1/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/v1/users/{id}` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ ID
- `PUT /api/v1/users/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/v1/users/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –°–µ—Ä–≤–µ—Ä–Ω—ã–µ endpoints **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–´** (—Å–º. —Ä–∞–∑–¥–µ–ª 1.2)

#### ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Web UI)

**–§–∞–π–ª:** `server/web/src/services/authService.ts`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ `localStorage` (‚ö†Ô∏è –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, —Å–º. SECURITY_AUDIT_REPORT.md)
- Redux store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (`ProtectedRoute`)

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage (—É—è–∑–≤–∏–º–æ—Å—Ç—å XSS)
- ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1.2. –ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã)

#### ‚ùå –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (`server/api`) **–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ –∏–º–µ–µ—Ç** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–§–∞–π–ª:** `server/api/src/main/kotlin/com/company/ipcamera/server/Application.kt`

```kotlin
fun Application.module() {
    // ‚ùå –ù–ï–¢ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Authentication –ø–ª–∞–≥–∏–Ω–∞
    // ‚ùå –ù–ï–¢ JWT –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    // ‚ùå –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤

    install(CORS) {
        anyHost()  // ‚ùå –ö–†–ò–¢–ò–ß–ù–û: –†–∞–∑—Ä–µ—à–∞–µ—Ç –ª—é–±—ã–µ –¥–æ–º–µ–Ω—ã
    }

    configureRouting()  // ‚ùå –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
}
```

**–§–∞–π–ª:** `server/api/src/main/kotlin/com/company/ipcamera/server/routing/CameraRoutes.kt`

```kotlin
// ‚ùå –ù–ï–¢ authenticate() –±–ª–æ–∫–æ–≤
// ‚ùå –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π
// ‚ùå –í—Å–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- üî¥ –õ—é–±–æ–π –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üî¥ –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- üî¥ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üî¥ –ù–µ—Ç –∞—É–¥–∏—Ç–∞ –¥–æ—Å—Ç—É–ø–∞

**–°—Å—ã–ª–∫–∞ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç—å:** `docs/SECURITY_AUDIT_REPORT.md` - –£—è–∑–≤–∏–º–æ—Å—Ç—å #1

#### ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Active Directory / LDAP

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ù–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LDAP (–Ω–∞–ø—Ä–∏–º–µ—Ä, `unboundid-ldapsdk`)
- –ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –¥–æ–º–µ–Ω—É
- –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ AD
- –ù–µ—Ç –º–∞–ø–ø–∏–Ω–≥–∞ –≥—Ä—É–ø–ø –¥–æ–º–µ–Ω–∞ –Ω–∞ —Ä–æ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
```kotlin
// –ü—Ä–∏–º–µ—Ä —Ç—Ä–µ–±—É–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
data class DomainConfig(
    val domainController: String,  // dc.example.com
    val baseDN: String,              // DC=example,DC=com
    val bindDN: String,              // CN=ServiceAccount,OU=ServiceAccounts,DC=example,DC=com
    val bindPassword: String,
    val userSearchBase: String,     // OU=Users,DC=example,DC=com
    val groupSearchBase: String,    // OU=Groups,DC=example,DC=com
    val groupMapping: Map<String, UserRole>  // "Domain Admins" -> ADMIN
)
```

#### ‚ùå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSO (Single Sign-On)

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ SAML 2.0
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ OAuth 2.0 / OpenID Connect
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WS-Federation
- –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Identity Provider (IdP)
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –µ–¥–∏–Ω–æ–≥–æ –≤—Ö–æ–¥–∞

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- SAML 2.0 –ø—Ä–æ–≤–∞–π–¥–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `spring-security-saml2-core` –¥–ª—è JVM)
- OAuth 2.0 / OIDC –∫–ª–∏–µ–Ω—Ç
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º IdP (Azure AD, Okta, Keycloak)

#### ‚ùå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Kerberos

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ù–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è Kerberos (–Ω–∞–ø—Ä–∏–º–µ—Ä, `org.ietf:gssapi`)
- –ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kerberos realm
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ SPNEGO —Ç–æ–∫–µ–Ω–æ–≤
- –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Key Distribution Center (KDC)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
```kotlin
// –ü—Ä–∏–º–µ—Ä —Ç—Ä–µ–±—É–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
data class KerberosConfig(
    val realm: String,                    // EXAMPLE.COM
    val kdcHost: String,                  // kdc.example.com
    val servicePrincipal: String,        // HTTP/server.example.com@EXAMPLE.COM
    val keytabPath: String,               // /etc/krb5.keytab
    val enableDelegation: Boolean = false
)
```

#### ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–æ–º–µ–Ω–æ–º

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ù–µ—Ç —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ AD (—Å–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≥—Ä—É–ø–ø)
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–ª–æ–∫–∞–ª—å–Ω—ã–π vs –¥–æ–º–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

#### ‚ùå –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø –¥–æ–º–µ–Ω–∞

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ù–µ—Ç –º–∞–ø–ø–∏–Ω–≥–∞ –≥—Ä—É–ø–ø AD –Ω–∞ —Ä–æ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ù–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥—Ä—É–ø–ø
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø

---

## 2. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –¥–æ–º–µ–Ω–µ —Å SSO + Kerberos

### 2.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å                       ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ  ‚îÇ Active       ‚îÇ      ‚îÇ Key          ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ Directory    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Distribution ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ (Domain      ‚îÇ      ‚îÇ Center (KDC)  ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ Controller)  ‚îÇ      ‚îÇ              ‚îÇ                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ                            ‚îÇ
‚îÇ         ‚îÇ LDAP/                ‚îÇ Kerberos                   ‚îÇ
‚îÇ         ‚îÇ Kerberos             ‚îÇ Protocol                   ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ                            ‚îÇ
‚îÇ         ‚ñº                      ‚ñº                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ     IP-CSS Server                       ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ                                          ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Authentication Layer               ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - LDAP Client                     ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Kerberos Client                 ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - SSO Provider (SAML/OIDC)        ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ                                          ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Authorization Layer                ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Role Mapping                    ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Permission Engine               ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Group Membership Check          ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ                                          ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ User Sync Service                   ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Periodic Sync                    ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Event-driven Updates             ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Conflict Resolution              ‚îÇ ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2. –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Kerberos (Windows)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IP-CSS
2. –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç Kerberos –±–∏–ª–µ—Ç –æ—Ç KDC
3. –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SPNEGO —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ KDC
5. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ AD
6. –°–µ—Ä–≤–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø AD
7. –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í—Ö–æ–¥ —á–µ—Ä–µ–∑ SSO (SAML/OIDC)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IP-CSS
2. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ Identity Provider (IdP)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –≤ IdP
4. IdP –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç SAML assertion –∏–ª–∏ OIDC token
5. –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç assertion/token
6. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ —Ç–æ–∫–µ–Ω–∞
7. –°–µ—Ä–≤–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å AD (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
8. –°–µ—Ä–≤–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø AD
9. –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
2. –ó–∞–¥–∞—á–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ AD —á–µ—Ä–µ–∑ LDAP
3. –ó–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö OU
4. –ó–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–∞—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î:
   - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Ä–æ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
2. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —Ç–æ–∫–µ–Ω
3. Middleware –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ —Ç–æ–∫–µ–Ω–∞
4. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø –≤ AD (–∫—ç—à –∏–ª–∏ –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å)
5. Middleware –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø
6. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
7. Middleware —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∏–ª–∏ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø

---

## 3. –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 3.1. –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)

**–¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å:**
```kotlin
data class User(
    val id: String,
    val username: String,
    val email: String? = null,
    val fullName: String? = null,
    val role: UserRole,
    val permissions: List<String> = emptyList(),
    val createdAt: Long,
    val lastLoginAt: Long? = null,
    val isActive: Boolean = true
)
```

**–¢—Ä–µ–±—É–µ–º–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –¥–æ–º–µ–Ω–∞:**
```kotlin
data class User(
    val id: String,
    val username: String,                    // sAMAccountName
    val email: String? = null,
    val fullName: String? = null,
    val displayName: String? = null,
    val role: UserRole,
    val permissions: List<String> = emptyList(),

    // –î–æ–º–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    val domainSID: String? = null,            // Security Identifier –∏–∑ AD
    val domainDN: String? = null,             // Distinguished Name
    val domainGroups: List<String> = emptyList(), // –ì—Ä—É–ø–ø—ã –≤ AD
    val domainGroupsDN: List<String> = emptyList(), // DN –≥—Ä—É–ø–ø

    // –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    val source: UserSource,                   // LOCAL, DOMAIN, SSO

    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
    val lastSyncAt: Long? = null,
    val syncStatus: SyncStatus = SyncStatus.PENDING,

    // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    val createdAt: Long,
    val lastLoginAt: Long? = null,
    val isActive: Boolean = true
)

enum class UserSource {
    LOCAL,      // –õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Å–æ–∑–¥–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ)
    DOMAIN,     // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ Active Directory
    SSO,        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–µ—Ä–µ–∑ SSO (SAML/OIDC)
    HYBRID      // –ö–æ–º–±–∏–Ω–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–∫–∞–ª—å–Ω—ã–π —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –¥–æ–º–µ–Ω—É)
}

enum class SyncStatus {
    PENDING,    // –û–∂–∏–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    SYNCED,     // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω
    FAILED,     // –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    OUTDATED    // –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ
}
```

### 3.2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**

```kotlin
// core/common/src/commonMain/kotlin/com/company/ipcamera/core/common/config/DomainConfig.kt

data class DomainConfig(
    // LDAP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    val ldap: LdapConfig,

    // Kerberos –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    val kerberos: KerberosConfig? = null,

    // SSO –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    val sso: SsoConfig? = null,

    // –ú–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø –Ω–∞ —Ä–æ–ª–∏
    val groupMapping: Map<String, UserRole>,

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    val sync: SyncConfig
)

data class LdapConfig(
    val enabled: Boolean = true,
    val host: String,                        // dc.example.com
    val port: Int = 389,                      // 636 –¥–ª—è LDAPS
    val useSSL: Boolean = true,
    val baseDN: String,                      // DC=example,DC=com
    val bindDN: String,                      // CN=ServiceAccount,OU=ServiceAccounts,DC=example,DC=com
    val bindPassword: String,
    val userSearchBase: String,              // OU=Users,DC=example,DC=com
    val userSearchFilter: String = "(objectClass=user)",
    val groupSearchBase: String,             // OU=Groups,DC=example,DC=com
    val groupSearchFilter: String = "(objectClass=group)",
    val connectionTimeout: Long = 5000,
    val readTimeout: Long = 5000
)

data class KerberosConfig(
    val enabled: Boolean = true,
    val realm: String,                       // EXAMPLE.COM
    val kdcHost: String,                     // kdc.example.com
    val kdcPort: Int = 88,
    val servicePrincipal: String,            // HTTP/server.example.com@EXAMPLE.COM
    val keytabPath: String,                  // /etc/krb5.keytab
    val enableDelegation: Boolean = false,
    val ticketCachePath: String? = null
)

data class SsoConfig(
    val enabled: Boolean = false,
    val provider: SsoProvider,              // SAML, OIDC, WS_FED
    val saml: SamlConfig? = null,
    val oidc: OidcConfig? = null
)

enum class SsoProvider {
    SAML,
    OIDC,
    WS_FED
}

data class SamlConfig(
    val idpMetadataUrl: String,
    val spEntityId: String,
    val spAssertionConsumerServiceUrl: String,
    val spSingleLogoutServiceUrl: String? = null,
    val certificatePath: String,
    val privateKeyPath: String,
    val nameIdFormat: String = "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"
)

data class OidcConfig(
    val issuer: String,                     // https://login.microsoftonline.com/{tenant-id}/v2.0
    val clientId: String,
    val clientSecret: String,
    val redirectUri: String,
    val scopes: List<String> = listOf("openid", "profile", "email")
)

data class SyncConfig(
    val enabled: Boolean = true,
    val interval: Long = 300000,             // 5 –º–∏–Ω—É—Ç
    val fullSyncInterval: Long = 86400000,   // 24 —á–∞—Å–∞
    val syncOnStartup: Boolean = true,
    val syncOnLogin: Boolean = true,
    val createUsers: Boolean = true,        // –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    val updateUsers: Boolean = true,         // –û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
    val deactivateUsers: Boolean = true,    // –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã—Ö
    val syncGroups: Boolean = true          // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã
)
```

### 3.3. LDAP –∫–ª–∏–µ–Ω—Ç

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**

```kotlin
// core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/ldap/LdapClient.kt

interface LdapClient {
    /**
     * –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ LDAP —Å–µ—Ä–≤–µ—Ä—É
     */
    suspend fun connect(): Result<Unit>

    /**
     * –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç LDAP —Å–µ—Ä–≤–µ—Ä–∞
     */
    suspend fun disconnect()

    /**
     * –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     */
    suspend fun authenticate(username: String, password: String): Result<LdapUser>

    /**
     * –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏
     */
    suspend fun findUser(username: String): LdapUser?

    /**
     * –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ DN
     */
    suspend fun findUserByDN(dn: String): LdapUser?

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     */
    suspend fun getUserGroups(userDN: String): List<LdapGroup>

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π OU
     */
    suspend fun getAllUsers(ou: String? = null): List<LdapUser>

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≥—Ä—É–ø–ø—ã
     */
    suspend fun getAllGroups(ou: String? = null): List<LdapGroup>

    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–ª–µ–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø–µ
     */
    suspend fun isMemberOfGroup(userDN: String, groupDN: String): Boolean
}

data class LdapUser(
    val dn: String,
    val sAMAccountName: String,
    val userPrincipalName: String?,
    val email: String?,
    val displayName: String?,
    val givenName: String?,
    val sn: String?,
    val memberOf: List<String>,              // DN –≥—Ä—É–ø–ø
    val sID: String?,
    val enabled: Boolean,
    val lastLogon: Long?
)

data class LdapGroup(
    val dn: String,
    val name: String,
    val sAMAccountName: String,
    val description: String?,
    val member: List<String>,               // DN —á–ª–µ–Ω–æ–≤
    val sID: String?
)
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```kotlin
// build.gradle.kts
dependencies {
    implementation("com.unboundid:unboundid-ldapsdk:6.0.8")
}
```

### 3.4. Kerberos –∫–ª–∏–µ–Ω—Ç

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**

```kotlin
// core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/kerberos/KerberosClient.kt

interface KerberosClient {
    /**
     * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Kerberos –∫–æ–Ω—Ç–µ–∫—Å—Ç
     */
    suspend fun initialize(): Result<Unit>

    /**
     * –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ SPNEGO —Ç–æ–∫–µ–Ω—É
     */
    suspend fun authenticateSpnegoToken(token: ByteArray): Result<KerberosPrincipal>

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ Kerberos principal
     */
    suspend fun getUserInfo(principal: KerberosPrincipal): Result<LdapUser>

    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞
     */
    suspend fun validateTicket(ticket: ByteArray): Boolean
}

data class KerberosPrincipal(
    val name: String,
    val realm: String,
    val sAMAccountName: String
)
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```kotlin
// build.gradle.kts
dependencies {
    // Kerberos –≤—Å—Ç—Ä–æ–µ–Ω –≤ JVM, –Ω–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è:
    implementation("org.ietf:gssapi:1.0.0")  // –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
}
```

### 3.5. SSO –ø—Ä–æ–≤–∞–π–¥–µ—Ä

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**

```kotlin
// core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/sso/SsoProvider.kt

interface SsoProvider {
    /**
     * –ü–æ–ª—É—á–∏—Ç—å URL –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ IdP
     */
    suspend fun getLoginUrl(returnUrl: String): String

    /**
     * –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç IdP
     */
    suspend fun processResponse(response: SsoResponse): Result<SsoUser>

    /**
     * –í—ã–π—Ç–∏ –∏–∑ SSO —Å–µ—Å—Å–∏–∏
     */
    suspend fun logout(returnUrl: String): String
}

data class SsoResponse(
    val samlAssertion: String? = null,
    val oidcToken: String? = null,
    val relayState: String? = null
)

data class SsoUser(
    val nameId: String,
    val email: String?,
    val displayName: String?,
    val groups: List<String>,
    val attributes: Map<String, String>
)
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è SAML:**
```kotlin
// build.gradle.kts
dependencies {
    implementation("org.springframework.security:spring-security-saml2-service-provider:6.2.0")
    // –ò–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:
    implementation("com.onelogin:java-saml:3.0.0")
}
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è OIDC:**
```kotlin
// build.gradle.kts
dependencies {
    implementation("com.nimbusds:oauth2-oidc-sdk:10.0.2")
}
```

### 3.6. –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**

```kotlin
// shared/src/commonMain/kotlin/com/company/ipcamera/shared/domain/service/UserSyncService.kt

interface UserSyncService {
    /**
     * –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
     */
    suspend fun syncUsers(): Result<SyncResult>

    /**
     * –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     */
    suspend fun syncUser(username: String): Result<User>

    /**
     * –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
     */
    suspend fun getSyncStatus(): SyncStatus
}

data class SyncResult(
    val created: Int,
    val updated: Int,
    val deactivated: Int,
    val errors: List<SyncError>,
    val duration: Long
)

data class SyncError(
    val username: String,
    val error: String,
    val timestamp: Long
)

data class SyncStatus(
    val lastSyncAt: Long?,
    val nextSyncAt: Long,
    val isRunning: Boolean,
    val lastResult: SyncResult?
)
```

### 3.7. Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**

```kotlin
// server/api/src/main/kotlin/com/company/ipcamera/server/auth/AuthMiddleware.kt

fun Application.configureAuthentication() {
    install(Authentication) {
        // JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        jwt("jwt-auth") {
            realm = "ip-camera-system"
            verifier = jwtVerifier
            validate { credential ->
                val principal = credential.payload
                val userId = principal.getClaim("userId")?.asString()
                val username = principal.getClaim("username")?.asString()
                val roles = principal.getClaim("roles")?.asList(String::class.java) ?: emptyList()

                if (userId != null && username != null) {
                    JWTPrincipal(principal)
                } else {
                    null
                }
            }
        }

        // Kerberos –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        kerberos("kerberos-auth") {
            realm = kerberosConfig.realm
            // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SPNEGO
        }

        // SSO –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        sso("sso-auth") {
            provider = ssoProvider
        }
    }
}

fun Route.requireAuth(block: Route.() -> Unit) {
    authenticate("jwt-auth", "kerberos-auth", "sso-auth") {
        block()
    }
}

fun Route.requireRole(role: UserRole, block: Route.() -> Unit) {
    requireAuth {
        authorize { principal ->
            val userRoles = principal.getClaim("roles")?.asList(String::class.java) ?: emptyList()
            userRoles.contains(role.name)
        }
        block()
    }
}

fun Route.requirePermission(permission: String, block: Route.() -> Unit) {
    requireAuth {
        authorize { principal ->
            val permissions = principal.getClaim("permissions")?.asList(String::class.java) ?: emptyList()
            permissions.contains(permission)
        }
        block()
    }
}
```

---

## 4. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 4.1. –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ö—Ä–∏—Ç–∏—á–Ω–æ)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**
**–°—Ä–æ–∫:** 1-2 –Ω–µ–¥–µ–ª–∏

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `ktor-server-auth` –∏ `ktor-server-auth-jwt`
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å JWT –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
4. ‚úÖ –ó–∞—â–∏—Ç–∏—Ç—å –≤—Å–µ API endpoints
5. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å endpoints –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`/api/v1/auth/login`, `/api/v1/auth/logout`, `/api/v1/auth/refresh`)
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
7. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—É–¥–∞–ª–∏—Ç—å `anyHost()`)

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `server/api/build.gradle.kts` - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `server/api/src/main/kotlin/com/company/ipcamera/server/Application.kt` - –¥–æ–±–∞–≤–∏—Ç—å Authentication
- `server/api/src/main/kotlin/com/company/ipcamera/server/routing/*.kt` - –∑–∞—â–∏—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã
- `server/api/src/main/kotlin/com/company/ipcamera/server/auth/*.kt` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### 4.2. –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† **–í–´–°–û–ö–ò–ô**
**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `unboundid-ldapsdk`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `LdapClient` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `DomainConfig`
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø
5. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ LDAP
6. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å LDAP –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ API endpoints
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `core/common/src/commonMain/kotlin/com/company/ipcamera/core/common/config/DomainConfig.kt`
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/ldap/LdapClient.kt`
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/ldap/LdapClientImpl.kt`

### 4.3. –≠—Ç–∞–ø 3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† **–í–´–°–û–ö–ò–ô**
**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å `User` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–æ–º–µ–Ω–∞
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `UserSyncService`
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø AD –Ω–∞ —Ä–æ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–ª–æ–∫–∞–ª—å–Ω—ã–π vs –¥–æ–º–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `shared/src/commonMain/kotlin/com/company/ipcamera/shared/domain/service/UserSyncService.kt`
- `shared/src/commonMain/kotlin/com/company/ipcamera/shared/data/service/UserSyncServiceImpl.kt`
- `server/api/src/main/kotlin/com/company/ipcamera/server/job/UserSyncJob.kt`

### 4.4. –≠—Ç–∞–ø 4: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Kerberos (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–°–†–ï–î–ù–ò–ô**
**–°—Ä–æ–∫:** 3-4 –Ω–µ–¥–µ–ª–∏

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `KerberosClient` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Kerberos –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É SPNEGO —Ç–æ–∫–µ–Ω–æ–≤
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Kerberos –≤ Ktor Authentication
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/kerberos/KerberosClient.kt`
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/kerberos/KerberosClientImpl.kt`
- `server/api/src/main/kotlin/com/company/ipcamera/server/auth/KerberosAuth.kt`

### 4.5. –≠—Ç–∞–ø 5: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSO (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–°–†–ï–î–ù–ò–ô**
**–°—Ä–æ–∫:** 4-5 –Ω–µ–¥–µ–ª—å

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –í—ã–±—Ä–∞—Ç—å SSO –ø—Ä–æ–≤–∞–π–¥–µ—Ä (SAML, OIDC, –∏–ª–∏ –æ–±–∞)
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `SsoProvider` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SSO
5. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å endpoints –¥–ª—è SSO (login, callback, logout)
6. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å SSO –≤ Ktor Authentication
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/sso/SsoProvider.kt`
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/sso/SamlProvider.kt`
- `core/network/src/jvmMain/kotlin/com/company/ipcamera/core/network/sso/OidcProvider.kt`
- `server/api/src/main/kotlin/com/company/ipcamera/server/routing/SsoRoutes.kt`

### 4.6. –≠—Ç–∞–ø 6: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–°–†–ï–î–ù–ò–ô**
**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≥—Ä—É–ø–ø–∞—Ö
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥—Ä—É–ø–ø
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø
6. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `server/api/src/main/kotlin/com/company/ipcamera/server/auth/AuthMiddleware.kt`
- `shared/src/commonMain/kotlin/com/company/ipcamera/shared/domain/service/GroupMembershipService.kt`

---

## 5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 5.1. –•—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker secrets –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π vault (HashiCorp Vault, AWS Secrets Manager)
3. ‚úÖ –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –∫–æ–¥–µ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å service account —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ AD

### 5.2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LDAPS (LDAP over SSL/TLS) –≤–º–µ—Å—Ç–æ LDAP
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è LDAPS
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å certificate pinning –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç MITM
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS 1.2+ –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### 5.3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ JWT —Ç–æ–∫–µ–Ω—ã (15-30 –º–∏–Ω—É—Ç)
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å refresh token rotation
3. ‚úÖ –•—Ä–∞–Ω–∏—Ç—å refresh tokens –≤ httpOnly cookies
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–∑—ã–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤
5. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ (—É—Å–ø–µ—à–Ω—ã–µ –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ)

### 5.4. –ê—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
2. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
3. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º
4. ‚úÖ –•—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ (ELK, Splunk)
5. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

---

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 6.1. Unit —Ç–µ—Å—Ç—ã

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–∫—Ä—ã—Ç—å:**
- ‚úÖ `LdapClient` - –≤—Å–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ `KerberosClient` - –≤—Å–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ `SsoProvider` - –≤—Å–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ `UserSyncService` - –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø –Ω–∞ —Ä–æ–ª–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

### 6.2. Integration —Ç–µ—Å—Ç—ã

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–∫—Ä—ã—Ç—å:**
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ LDAP
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Kerberos
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ SSO
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π LDAP —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, Apache Directory Server)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π KDC (–Ω–∞–ø—Ä–∏–º–µ—Ä, MIT Kerberos)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π IdP (–Ω–∞–ø—Ä–∏–º–µ—Ä, Keycloak)

### 6.3. E2E —Ç–µ—Å—Ç—ã

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–∫—Ä—ã—Ç—å:**
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Kerberos
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ SSO
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ AD
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥—Ä—É–ø–ø –≤ AD

---

## 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 7.1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**
1. ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ LDAP
3. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Kerberos
4. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSO
5. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
6. ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è endpoints –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 7.2. –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**
1. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ –¥–æ–º–µ–Ω–µ
2. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫
3. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É
4. ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## 8. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### 8.1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã

–ü—Ä–æ–µ–∫—Ç IP-CSS **–Ω–µ –≥–æ—Ç–æ–≤** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å –¥–æ–º–µ–Ω–æ–º Active Directory –∏ SSO/Kerberos. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. üî¥ **–°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
2. üî¥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP/AD** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
3. üî¥ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Kerberos** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
4. üî¥ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSO** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
5. üî¥ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
6. üî¥ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä—É–ø–ø** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### 8.2. –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å):**
- –≠—Ç–∞–ø 1 (–°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è): 1-2 –Ω–µ–¥–µ–ª–∏
- –≠—Ç–∞–ø 2 (LDAP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è): 2-3 –Ω–µ–¥–µ–ª–∏
- –≠—Ç–∞–ø 3 (–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π): 2-3 –Ω–µ–¥–µ–ª–∏
- **–ò—Ç–æ–≥–æ:** 5-8 –Ω–µ–¥–µ–ª—å (1.5-2 –º–µ—Å—è—Ü–∞)

**–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–≤–∫–ª—é—á–∞—è Kerberos –∏ SSO):**
- –≠—Ç–∞–ø 1-3: 5-8 –Ω–µ–¥–µ–ª—å
- –≠—Ç–∞–ø 4 (Kerberos): 3-4 –Ω–µ–¥–µ–ª–∏
- –≠—Ç–∞–ø 5 (SSO): 4-5 –Ω–µ–¥–µ–ª–∏
- –≠—Ç–∞–ø 6 (–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –≥—Ä—É–ø–ø–∞—Ö): 2-3 –Ω–µ–¥–µ–ª–∏
- **–ò—Ç–æ–≥–æ:** 14-20 –Ω–µ–¥–µ–ª—å (3.5-5 –º–µ—Å—è—Ü–µ–≤)

### 8.3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

**–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–±–ª–æ–∫–µ—Ä—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):**
1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–≠—Ç–∞–ø 1)
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ (1-2 –º–µ—Å—è—Ü–∞):**
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å LDAP (–≠—Ç–∞–ø 2)
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≠—Ç–∞–ø 3)

**–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ (3-5 –º–µ—Å—è—Ü–µ–≤):**
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Kerberos (–≠—Ç–∞–ø 4)
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É SSO (–≠—Ç–∞–ø 5)
7. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ –≥—Ä—É–ø–ø–∞—Ö (–≠—Ç–∞–ø 6)

### 8.4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–∞—Ç—å —Å –≠—Ç–∞–ø–∞ 1** - –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** - –Ω–µ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (unboundid-ldapsdk, spring-security-saml2)
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å–Ω–∞—á–∞–ª–∞ LDAP, –ø–æ—Ç–æ–º Kerberos, –ø–æ—Ç–æ–º SSO
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–º–µ—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π AD –¥–æ–º–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

---

**–°–æ—Å—Ç–∞–≤–∏—Ç–µ–ª—å:** AI Security & Architecture Analyst
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2025
**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** Alfa-0.0.1



